%ul
  - @posts.each do |post|
    %li.posts
      = post.user.email
      = image_tag post.image.url(:medium)
      = post.caption
      = "posted #{time_ago_in_words(post.created_at)} ago"

      = link_to 'Like', post_likes_path(post), class: 'like-link' if current_user && !current_user.liked?(post)
      = link_to 'Unlike', post_likes_path(post), class: 'like-link' if current_user && current_user.liked?(post)
      %span.likes_count= post.likes.count
      = 'like'.pluralize post.likes.count

      - if post.comments.any?
        = render 'comments', comments: post.comments
      = link_to 'Comment', new_post_comment_path(post)
